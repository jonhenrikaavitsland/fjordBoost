---
const navLinks = [
  { link: '/', label: 'home' },
  { link: '#services', label: 'services' },
  { link: '#about', label: 'about' },
  { link: '#testimonials', label: 'testimonials' },
  { link: '#contact', label: 'contact' },
];
---

<header class='flex flex-col sticky top-0 bg-white shadow-md'>
  <div
    class='flex justify-between flex-wrap md:flex-nowrap md:justify-normal px-5 py-2 lg:container lg:mx-auto'
  >
    <a href='/'>
      <div
        class='flex items-end me-5 md:me-20 text-xl font-bold text-secondary'
      >
        <span class='capitalize'>fjord</span>
        <span class='capitalize'>boost</span>
      </div>
    </a>

    <nav
      class='hidden md:flex justify-end items-center w-full'
      aria-label='primary navigation'
    >
      <ul class='flex gap-6 capitalize whitespace-nowrap'>
        {
          navLinks?.map((navLink) => (
            <li>
              <a
                href={navLink.link}
                class='block py-2.5 leading-none hover:underline hover:underline-offset-4'
              >
                {navLink.label}
              </a>
            </li>
          ))
        }
        <li class='flex items-center'>
          <a
            href='#contact'
            class='capitalize bg-secondary text-white rounded-lg px-2 py-1.5 hover:bg-secondary/90 font-semibold'
            >get started</a
          >
        </li>
      </ul>
    </nav>

    <!-- Mobile menu toggle -->
    <details class='flex my-auto md:hidden'>
      <summary class='flex justify-end cursor-pointer p-1.25'>
        <img
          src='/images/icons/menu-open.svg'
          alt='Open menu'
          class='open-icon'
        />
        <img
          src='/images/icons/menu-close.svg'
          alt='Close menu'
          class='close-icon hidden'
        />
      </summary>

      <div
        class='absolute left-0 right-0 top-full bg-white border-t p-5 z-50 shadow-md'
      >
        <ul
          class='flex flex-col gap-4 font-medium capitalize text-xl'
        >
          {
            navLinks?.map((navLink) => (
              <li>
                <a
                  href={navLink.link}
                  class='mobile-nav-link block px-2 py-2.5 leading-none hover:underline hover:underline-offset-4'
                >
                  {navLink.label}
                </a>
              </li>
            ))
          }
          <li class='flex text-center'>
            <a
              href='#contact'
              class='capitalize bg-secondary text-white rounded-lg px-2 py-1 w-full hover:bg-secondary/90 font-semibold'
              >get started</a
            >
          </li>
        </ul>
      </div>
    </details>
  </div>
</header>
<style>
  details[open] .open-icon {
    display: none;
  }

  details[open] .close-icon {
    display: inline;
  }

  details[open] > div {
    animation: slideDown 0.2s ease-out;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-0.25rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>

<!-- ✅ Defer script so it won’t block rendering -->
<script defer>
  document.addEventListener('DOMContentLoaded', () => {
    const details = document.querySelector('header details');
    const links = document.querySelectorAll(
      'header .mobile-nav-link'
    );

    links.forEach((link) => {
      link.addEventListener('click', () => {
        if (details.hasAttribute('open')) {
          remove.setAttribute('open');
        }
      });
    });
  });
</script>
